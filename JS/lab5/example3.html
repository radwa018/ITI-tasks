<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Contact Form</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    input, button { margin: 5px; padding: 8px; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    table, th, td { border: 1px solid black; padding: 8px; }
    th { background: #eee; }
  </style>
</head>
<body>
  <h2>Contact Form</h2>

  <input type="text" id="name" placeholder="Name">
  <input type="email" id="email" placeholder="Email">
  <button onclick="addUser()">Add User</button>
  <button onclick="updateUser()">Save Edit</button>
  <input type="text" id="search" placeholder="Search..." onkeyup="searchUser()">

  <table>
    <thead>
      <tr><th>Name</th><th>Email</th><th>Actions</th></tr>
    </thead>
    <tbody id="userTable"></tbody>
  </table>

  <script>
    let editIndex = null;

    //Load users from localStorage
    function loadUsers() {
      let users = JSON.parse(localStorage.getItem("users")) || [];
      let table = document.getElementById("userTable");
      table.innerHTML = "";

      users.forEach((u, i) => {
        table.innerHTML += `
          <tr>
            <td>${u.name}</td>
            <td>${u.email}</td>
            <td>
              <button onclick="editUser(${i})">Edit</button>
              <button onclick="deleteUser(${i})">Delete</button>
            </td>
          </tr>`;
      });
    }

    //add user
    function addUser() {
      let name = document.getElementById("name").value;
      let email = document.getElementById("email").value;

      if (name && email) {
        let users = JSON.parse(localStorage.getItem("users")) || [];
        users.push({ name, email });
        localStorage.setItem("users", JSON.stringify(users));
        loadUsers();
        document.getElementById("name").value = "";
        document.getElementById("email").value = "";
      }
    }

    //edit user
    function editUser(i) {
      let users = JSON.parse(localStorage.getItem("users")) || [];
      document.getElementById("name").value = users[i].name;
      document.getElementById("email").value = users[i].email;
      editIndex = i;
    }

    //save edited user
    function updateUser() {
      if (editIndex !== null) {
        let users = JSON.parse(localStorage.getItem("users")) || [];
        users[editIndex] = {
          name: document.getElementById("name").value,
          email: document.getElementById("email").value
        };
        localStorage.setItem("users", JSON.stringify(users));
        loadUsers();
        editIndex = null;
        document.getElementById("name").value = "";
        document.getElementById("email").value = "";
      }
    }

    //delete user
    function deleteUser(i) {
      let users = JSON.parse(localStorage.getItem("users")) || [];
      users.splice(i, 1);
      localStorage.setItem("users", JSON.stringify(users));
      loadUsers();
    }

    //search by name
    function searchUser() {
      let searchValue = document.getElementById("search").value.toLowerCase();
      let users = JSON.parse(localStorage.getItem("users")) || [];
      let table = document.getElementById("userTable");
      table.innerHTML = "";

      users.filter(u => u.name.toLowerCase().includes(searchValue)).forEach((u, i) => {
        table.innerHTML += `
          <tr>
            <td>${u.name}</td>
            <td>${u.email}</td>
            <td>
              <button onclick="editUser(${i})">Edit</button>
              <button onclick="deleteUser(${i})">Delete</button>
            </td>
          </tr>`;
      });
    }

    loadUsers();
  </script>
</body>
</html>
